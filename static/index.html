<h1 class="result"></h1>

<form action="/short" method="POST">

	<label>URL:</label>
	<input type="text" name="url" />

	<input type="submit" value="Enviar" />
</form>

<script>

	const button = document.querySelector("input[type='submit']");
	const form = document.querySelector('form');

	let result = document.querySelector('.result');
	let input = document.querySelector("input[type='text']");

	function submitForm(event) {
		event.preventDefault();

		fetch('/short', {
			method: 'POST',
			headers: {
				'Content-Type': 'application/json'
			},
			body: JSON.stringify({url: input.value})
		}).then(response => {
			response.json()
				.then(data => {
					result.textContent = window.location.hostname + "/" + data.url
				})
				.catch(err => console.log(err))
		});
	}

	form.addEventListener('submit', submitForm);
</script>
